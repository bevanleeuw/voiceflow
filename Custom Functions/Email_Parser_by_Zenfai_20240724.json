{"functions":[{"id":"6690bf530b546ef70f506be6","name":"Email Parser by Zenfai","createdByID":997398,"folderID":null,"code":"export default async function main(args) {\n\n  // Extracting input variables\n  const { providedEmailMessage } = args.inputVars;\n\n  // Assign message to a constant\n  const providedPotentialEmail = `${providedEmailMessage}`;\n  \n\n  // Regular expression to extract email\n  const emailPattern = /[\\w.-]+@[\\w.-]+\\.\\w+/g\n  const match = providedPotentialEmail.match(emailPattern)\n\n  if (match) {\n    const email = match[0]\n\n    // Regular expression to validate email\n    const isValid = /^[\\w.-]+@[\\w.-]+\\.\\w+$/.test(email)\n\n    // Directing the flow to go forward on the 'success' path when the email is considered valid\n    if (isValid) {\n      return {\n        outputVars: {\n            selectedEmail: email,\n        },\n        next: { path: 'success' },\n        trace: [\n          {\n            type: 'debug',\n            payload: { message: '' }\n          }\n        ]\n      }\n    } \n    \n    // Directing the flow to go back to confirm on the 'fail' path when the email is considered invalid\n    else {  \n      return {\n        next: { path: 'fail' },\n        trace: [\n          {\n            type: 'debug',\n            payload: {\n              message:\n                'no valid email was found in the provided message'\n            }\n          }\n        ]\n      }\n    }\n  }\n\n  // Directing the flow to go back to confirm on the 'fail' path when no email was found in the message\n  else {\n    return {\n      next: { path: 'fail' },\n      trace: [\n        {\n          type: 'debug',\n          payload: {\n            message:\n              'no valid email was found in the provided message'\n          }\n        }\n      ]\n    }\n  }\n\n  // Note: In a production environment, consider removing or limiting debug traces\n  // to avoid exposing sensitive information or cluttering the user experience.\n}","image":"https://cm4-production-assets.s3.amazonaws.com/1720767860691-zen_black_bg.png","description":"Take a message from a user and verify if an email was found and is valid.","pathOrder":["6690bf530b546ef70f506be7","6690c4cb0b546ef70f506d7c"],"createdAt":"2024-07-18T19:08:20.000Z","updatedAt":"2024-07-18T19:08:20.000Z","updatedByID":997398}],"functionPaths":[{"id":"6690bf530b546ef70f506be7","name":"success","label":"","functionID":"6690bf530b546ef70f506be6","createdAt":"2024-07-18T19:08:19.758Z"},{"id":"6690c4cb0b546ef70f506d7c","name":"fail","label":"","functionID":"6690bf530b546ef70f506be6","createdAt":"2024-07-18T19:08:19.759Z"}],"functionVariables":[{"id":"6690bf530b546ef70f506be9","name":"providedEmailMessage","type":"input","functionID":"6690bf530b546ef70f506be6","description":"The last answer from the user.","createdAt":"2024-07-18T19:08:19.758Z"},{"id":"6690bfaf0b546ef70f506bef","name":"selectedEmail","type":"output","functionID":"6690bf530b546ef70f506be6","description":"The email that was found and extracted from the message.,","createdAt":"2024-07-18T19:08:19.759Z"}]}